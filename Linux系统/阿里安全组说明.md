## 安全组的限制和规则参数

### 安全组限制：

- 每个用户最多创建100个安全组

- 每个安全组最多添加1000个实例

- 每个实例最多加入5个安全组

- 每个安全组最多创建100条规则

### 安全组规则参数:

- 网络类型：公网 | 内网。如果该安全组属于专有网络，选择内网。

- 规则方向：出方向 | 入方向

- 授权策略：允许 | 拒绝

- 协议类型：全部 | TCP | UDP | ICMP | GRE

- 端口范围：1~65535；例如 1/200、80/80、22/22、-1/-1。其中 -1/-1 表示不限制端口。注意即使是一个端口，也要写成范围形式，如 22/22，不能只写 22，否则会报错 “IP 协议参数格式不正确”。

- 授权类型：地址段访问 | 安全组访问

- 授权对象：如果授权类型为 地址段访问，授权对象填写 IP 或者 CIDR 网段格式， 如：10.0.0.0 或者 192.168.0.0/24，仅支持 IPv4。如果授权类型为 安全组访问，授权对象从安全组的列表中选择一个安全组。注意：出于安全性的考虑，经典网络的内网入方向规则，授权类型优先选择“安全组访问”；如果选择 “地址段访问”，则仅支持单 IP 授权，授权对象的格式只能是 a.b.c.d/32，其中 IP 地址应根据您的实际需求设置，仅支持 IPv4，子网掩码必须是 /32。

- 优先级：1-100，数值越小，优先级越高。

## 内网互通

ECS实例需要在同一个机房，才能实现内网互通，否则只能走外网。

### 1、同一机房，同一账号

同一个安全组下的云服务器，默认内网互通。不同的安全组下的云服务器，默认内网不通。

1. 把云服务器放入到相同的安全组中，在 **内网入方向** 和 **内网出方向** 不配置任何类型授权。

2. 云服务器不在同一个安全组内，在 **内网入方向** 以 **安全组访问** 类型授权两个安全组互相内网授权

### 2、同一机房，不同账号

在 **内网入方向** 以 **安全组访问** 类型授权 GroupB 可以访问 GroupA 下的所有 ECS 云服务器
在 **内网入方向** 以 **安全组访问** 类型授权 GroupA 可以访问 GroupB 下的所有 ECS 云服务器

> 出于安全性的考虑，经典网络的内网入方向规则，授权类型优先选择“ **安全组访问** ”；如果选择 “ **地址段访问** ”，则仅支持单 IP 授权，授权对象的格式只能是`a.b.c.d/32`，其中 IP 地址应根据您的实际需求设置，仅支持 IPv4，子网掩码必须是 `/32` 。
